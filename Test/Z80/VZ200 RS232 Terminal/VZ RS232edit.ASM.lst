                        ; --------------------------------------
                        ; zasm: assemble "VZ RS232edit.ASM.txt"
                        ; date: 2015-01-03 21:24:18
                        ; --------------------------------------


4000:                   crtdge	equ	04000h
9000:                   stack	equ	09000h
0060:                   vzdelay equ	060h		;rom delay routine, delay value in bc
3450:                   beep	equ	03450h		;beep routine
3AE2:                   pcrlf1	equ	03ae2h		;send cr and lf to printer
058D:                   list	equ	058dh		;printer driver
05C4:                   listst	equ	05c4h		;printer status, bit 0 of A=0 if ready
033A:                   chrot	equ	033ah		;character output routine
0065:                   exitkey equ	101		;shift 'X' is exit from term
5800:                   outadr	equ	05800h		;transmit latch address
5000:                   inadr	equ	05000h		;input address
7000:                   toplin	equ	28672		;top line of screen
01E0:                   nolin	equ	480		;(number of lines - 1) * 32
                        ;
                        ;ascii definitions.
                        ;
001C:                   home	equ	28
000D:                   cr	equ	13
001B:                   esc	equ	27
0007:                   bell	equ	7
000C:                   ff	equ	12
000A:                   lf	equ	10
0008:                   bs	equ	8
0009:                   ht	equ	9
                        ;
                        ;Now define our storage area, where basic text usually starts
                        ;
8000:                   dumsg	equ	08000h		;part of the signon message that changes
8019:                   pntmsg	equ	dumsg+25	;printer on/off message
8031:                   dbits	equ	pntmsg+24	;dbits message
8049:                   sbits	equ	dbits+24	;sbits message
8061:                   parmsg	equ	sbits+24	;parity message
8079:                   p1msg	equ	parmsg+24	;strip parity message
80DF:                   pntflg	equ	p1msg+count3	;printer on/off flag
80E0:                   dupflg	equ	pntflg+1	;duplex flag, 0=full
80E1:                   p1flg	equ	dupflg+1	;add lf to cr flag
80E2:                   char	equ	p1flg+1		;character found
80E3:                   flag	equ	char+1		;keyboard flag
80E4:                   curpos	equ	flag+1		;column counter for output routine
80E5:                   cursor	equ	curpos+1	;cursor location
9000:                   bufend	equ	09000h		;to accomodate VZ-200/300
                        ;
                        	.z80
                        	aseg
0100:                   	org	0100h
                        	.phase	crtdge		;place that it will run
                        ;
0100:                   begadr	equ	$
                        ;
0100: AA                	defb	0aah		;mask for rom pack installation recognition
0101: 55                	defb	055h		;checked at power-up by the basic roms
0102: E7                	defb	0e7h
0103: 18                	defb	018h
                        ;
0104: C38402   [10]     	jp	start
                        ;
                        ;A few messages....
                        ;
0107: 4F4E20            onmsg:	defb	'ON '
010A: 4F4646            offmsg: defb	'OFF'
010D: 46554C4C          fullmsg:defb	'FULL'
0111: 48414C46          halfmsg:defb	'HALF'
                        ;
0115: 0C                signon: defb	ff
0116: 565A2D32          	defb	'VZ-200/300 RS-232 - VERSION 1.5',cr
011A: 30302F33          
011E: 30302052          
0122: 532D3233          
0126: 32202D20          
012A: 56455253          
012E: 494F4E20          
0132: 312E350D          
0136: 28432920          	defb	'(C) 1985 DICK SMITH ELECTRONICS',cr
013A: 31393835          
013E: 20444943          
0142: 4B20534D          
0146: 49544820          
014A: 454C4543          
014E: 54524F4E          
0152: 4943530D          
0156: 2D2D2D2D          	defb	'-------------------------------',cr
015A: 2D2D2D2D          
015E: 2D2D2D2D          
0162: 2D2D2D2D          
0166: 2D2D2D2D          
016A: 2D2D2D2D          
016E: 2D2D2D2D          
0172: 2D2D2D0D          
0176: 305D2045          	defb	'0] ENTER TERMINAL',cr
017A: 4E544552          
017E: 20544552          
0182: 4D494E41          
0186: 4C0D              
0188: 315D2046          	defb	'1] FULL/HALF DUPLEX:',0
018C: 554C4C2F          
0190: 48414C46          
0194: 20445550          
0198: 4C45583A          
019C: 00                
                        ;
019D: 46554C4C          ivals:	defb	'FULL',cr
01A1: 0D                
01A2: 325D2054          	defb	'2] TOGGLE PRINTER  :'
01A6: 4F47474C          
01AA: 45205052          
01AE: 494E5445          
01B2: 5220203A          
01B6: 4F46460D          	defb	'OFF',cr
01BA: 335D2053          	defb	'3] SET # DATA BITS :'
01BE: 45542023          
01C2: 20444154          
01C6: 41204249          
01CA: 5453203A          
01CE: 3820200D          	defb	'8  ',cr
01D2: 345D2053          	defb	'4] SET # STOP BITS :'
01D6: 45542023          
01DA: 2053544F          
01DE: 50204249          
01E2: 5453203A          
01E6: 3120200D          	defb	'1  ',cr
01EA: 355D2053          	defb	'5] SET PARITY      :'
01EE: 45542050          
01F2: 41524954          
01F6: 59202020          
01FA: 2020203A          
01FE: 4E20200D          	defb	'N  ',cr
0202: 365D2041          	defb	'6] ADD LF TO CR    :'
0206: 4444204C          
020A: 4620544F          
020E: 20435220          
0212: 2020203A          
0216:                   count1	equ	$
0216: 4F4646            	defb	'OFF'
0219: 0D0D              	defb	cr,cr
021B: 2A2A2A2A          	defb	'******* WHEN IN TERMINAL *******'
021F: 2A2A2A20          
0223: 5748454E          
0227: 20494E20          
022B: 5445524D          
022F: 494E414C          
0233: 202A2A2A          
0237: 2A2A2A2A          
023B: 2A202053          	defb	'*  SHIFT - X TO EXIT TERMINAL  *'
023F: 48494654          
0243: 202D2058          
0247: 20544F20          
024B: 45584954          
024F: 20544552          
0253: 4D494E41          
0257: 4C20202A          
025B: 2A2A2A2A          	defb	'********************************',0
025F: 2A2A2A2A          
0263: 2A2A2A2A          
0267: 2A2A2A2A          
026B: 2A2A2A2A          
026F: 2A2A2A2A          
0273: 2A2A2A2A          
0277: 2A2A2A2A          
027B: 00                
027C:                   count2	equ	$
0066:                   count3	defl	count2-count1
027C:                   ivals2	equ	$
                        
027C: 00                	defb	0	;printer on/off flag
027D: 00                	defb	0	;duplex flag
027E: 00                	defb	0	;add lf to cr flag
027F: 00                	defb	0	;where characters are placed when recvd from the keybrd
0280: 00                	defb	0	;a flag for the keyboard driver
0281: 00                	defb	0	;column counter
0282: 0000              	defw	0	;cursor position
                        ;
0284:                   ivalend equ	$
                        ;
0284: F3       [ 4]     start:	di			;get rid of the 6847 interrupt
0285: 310090   [14]     	ld	sp,stack	;make a stack
0288: 219D01   [24]     	ld	hl,ivals	;point to initial values
028B: 110080   [34]     	ld	de,dumsg	;where to put them
028E: 01E700   [44]     	ld	bc,ivalend-ivals ;number to put
0291: EDB0     [60|21]  	ldir			;init the system
0293: 3AE180   [13]     start1: ld	a,(p1flg)	;get crlf flag
0296: F5       [24]     	push	af		;save it
0297: 3E01     [31]     	ld	a,1		;we want crlf on signon
0299: 32E180   [44]     	ld	(p1flg),a
029C: 211501   [54]     	ld	hl,signon	;point to signon
029F: CD4D04   [71]     	call	msgout
02A2: 210080   [81]     	ld	hl,dumsg
02A5: CD4D04   [98]     	call	msgout
02A8: F1       [108]    	pop	af		;restore crlf flag
02A9: 32E180   [121]    	ld	(p1flg),a	;and save it here
02AC: CD5034   [138]    	call	beep		;make a noise
02AF: 219302   [148]    	ld	hl,start1	;set return address
02B2: E5       [159]    	push	hl		;put it on the stack
02B3: CD6605   [17]     kget:	call	getkey		;get a key
02B6: B7       [21]     	or	a
02B7: 28FA     [28|33]  	jr	z,kget		;loop till key ready
02B9: D630     [35]     	sub	'0'		;make it 0-10
02BB: 38F6     [42|47]  	jr	c,kget		;continue if error
02BD: FE07     [49]     	cp	6+1
02BF: 30F2     [56|61]  	jr	nc,kget		;continue if error
02C1: 21CE02   [66]     	ld	hl,cmdtab	;point to command table address
02C4: 87       [70]     	add	a,a		;make it *2
02C5: 5F       [74]     	ld	e,a		;put it in de
02C6: 1600     [81]     	ld	d,0
02C8: 19       [92]     	add	hl,de		;now hl points to correct table entry
02C9: 5E       [99]     	ld	e,(hl)		;get lsb
02CA: 23       [105]    	inc	hl
02CB: 56       [112]    	ld	d,(hl)		;get msb, now hl points to correct address
02CC: EB       [116]    	ex	de,hl
02CD: E9       [120]    	jp	(hl)		;go to that address
                        ;
                        ;table of addresses for the command table options
                        ;
02CE: 5603              cmdtab: defw	term		;actual terminal
02D0: DC02              	defw	setfh		;set full/half duplex
02D2: F702              	defw	prnton		;turn printer on/off
02D4: 3803              	defw	sdbits		;set # of data bits
02D6: 4703              	defw	ssbits		;set # of stop bits
02D8: 0B03              	defw	spar		;set parity
02DA: 0103              	defw	addlf		;add on lf to cr
                        ;
                        ;set full or half duplex
                        ;
02DC: 3AE080   [13]     setfh:	ld	a,(dupflg)	;check current
02DF: B7       [17]     	or	a		;check for full already
02E0: 3E01     [24]     	ld	a,1		;make half just in case
02E2: 211101   [34]     	ld	hl,halfmsg
02E5: 2804     [41|46]  	jr	z,setfh1
02E7: AF       [45]     	xor	a		;else make full
02E8: 210D01   [55]     	ld	hl,fullmsg
02EB: 32E080   [13]     setfh1: ld	(dupflg),a
02EE: 110080   [23]     	ld	de,dumsg	;where to go to
02F1: 010400   [33]     	ld	bc,4		;move it
02F4: EDB0     [49|21]  	ldir
02F6: C9       [59]     	ret
                        ;
                        ;toggle printer
                        ;
02F7: 21DF80   [10]     prnton: ld	hl,pntflg	;check printer flag
02FA: 111980   [20]     	ld	de,pntmsg
02FD: CD2103   [37]     	call	toggle
0300: C9       [47]     	ret
                        ;
                        ;add lf to cr flag
                        ;
0301: 21E180   [10]     addlf:	ld	hl,p1flg
0304: 117980   [20]     	ld	de,p1msg
0307: CD2103   [37]     	call	toggle
030A: C9       [47]     	ret
                        ;
                        ;set parity
                        ;
030B: 3A6180   [13]     spar:	ld	a,(parmsg)	;get parity message
030E: FE4E     [20]     	cp	'N'		;none ?
0310: 0E45     [27]     	ld	c,'E'		;make it an even then
0312: 2808     [34|39]  	jr	z,stpar1	;save this one if z flag set
0314: FE45     [41]     	cp	'E'
0316: 0E4F     [48]     	ld	c,'O'
0318: 2802     [55|60]  	jr	z,stpar1	;if even, make an odd
031A: 0E4E     [62]     	ld	c,'N'		;must be odd, make none
031C: 79       [ 4]     stpar1: ld	a,c
031D: 326180   [17]     	ld	(parmsg),a
0320: C9       [27]     	ret
                        ;
0321: 7E       [ 7]     toggle: ld	a,(hl)		;get current flag value
0322: B7       [11]     	or	a		;is it zero
0323: 3E01     [18]     	ld	a,1		;make it one if so
0325: 2801     [25|30]  	jr	z,togg1
0327: AF       [29]     	xor	a		;else make it a zero
0328: 77       [ 7]     togg1:	ld	(hl),a		;save new value
0329: 210A01   [17]     	ld	hl,offmsg
032C: B7       [21]     	or	a
032D: 2803     [28|33]  	jr	z,moveit1
032F: 210701   [38]     	ld	hl,onmsg
0332: 010300   [10]     moveit1:ld	bc,3
0335: EDB0     [16|21]  moveit: ldir
0337: C9       [26]     	ret
                        ;
                        ;set databits
                        ;
0338: 3A3180   [13]     sdbits: ld	a,(dbits)	;get current value
033B: FE37     [20]     	cp	'7'		;seven ?
033D: 3E38     [27]     	ld	a,'8'		;just in case
033F: 2802     [34|39]  	jr	z,sdb1
0341: 3E37     [41]     	ld	a,'7'
0343: 323180   [13]     sdb1:	ld	(dbits),a
0346: C9       [23]     	ret
                        ;
                        ;set stop bits
                        ;
0347: 3A4980   [13]     ssbits: ld	a,(sbits)	;get current value
034A: FE31     [20]     	cp	'1'		;seven ?
034C: 3E32     [27]     	ld	a,'2'		;just in case
034E: 2802     [34|39]  	jr	z,ssb2		;if z, must be 8, make it 7
0350: 3E31     [41]     	ld	a,'1'
0352: 324980   [13]     ssb2:	ld	(sbits),a
0355: C9       [23]     	ret
                        ;
0356: CD5604   [17]     term:	call	clrscr		;clear the screen
0359: CD1D04   [17]     tryser: call	chkstr		;check for incoming serial stuff
035C: 200E     [24|29]  	jr	nz,term1	;no-look for keyboard input then
035E: CD8F03   [41]     	call	inchr		;stuff there, get it
0361: CD6E04   [58]     	call	chrout		;and print it on the screen
0364: 4F       [62]     	ld	c,a		;put char in correct register for list routine
0365: 3ADF80   [75]     	ld	a,(pntflg)
0368: B7       [79]     	or	a
0369: C45305   [89|96]  	call	nz,list1
036C: CD6605   [17]     term1:	call	getkey		;see if user has typed anything
036F: B7       [21]     	or	a
0370: 28E7     [28|33]  	jr	z,tryser	;no, try the serial instead
0372: FE65     [35]     	cp	exitkey		;see if a return to main loop key
0374: C8       [40|46]  	ret	z		;return if so
0375: F5       [51]     	push	af		;save char
0376: CDC603   [68]     	call	outchr		;send to RS-232
0379: F1       [78]     	pop	af		;restore for screen output
037A: 4F       [82]     	ld	c,a
037B: 3AE080   [95]     	ld	a,(dupflg)	;check duplex first
037E: B7       [99]     	or	a
037F: 79       [103]    	ld	a,c
0380: 28D7     [110|115]	jr	z,tryser	;jump if full duplex
0382: CD6E04   [127]    	call	chrout		;and screen as well if 1/2 duplex
0385: 4F       [131]    	ld	c,a		;put char in correct register for list routine
0386: 3ADF80   [144]    	ld	a,(pntflg)
0389: B7       [148]    	or	a
038A: C45305   [158|165]	call	nz,list1
038D: 18CA     [170]    	jr	tryser
                        ;
                        ;get a character from the board
                        ;
                        ;incoming char must have been checked by a call to chkstr
                        ;
                        ;This routine is time critical and as i took be a long time to get it right,
                        ;i would suggest that it not be touched.
                        ;
038F: CD2E04   [17]     inchr:	call	del3a		;wait for 1/2 bit time, half way thru start bit
0392: CD2304   [34]     	call	del300		;and 1 bit time, half way thru data bit 0
0395: 3A3180   [47]     	ld	a,(dbits)	;get data bit value
0398: D630     [54]     	sub	'0'		;remove ascii offset, 8 for 8 bits 7 for 7
039A: 5F       [58]     	ld	e,a		;and put the calculated data bit value in e
039B: 0608     [65]     	ld	b,8		;must always do 8 shifts to get bit 0 correct
039D: 0E00     [72]     	ld	c,0		;accumulator for our serial bit stream
039F: 78       [ 4]     inchr1: ld	a,b		;check for last loop
03A0: FE01     [11]     	cp	1		;are we nearly finished (we are if seven bits)
03A2: 2007     [18|23]  	jr	nz,inchr2	;no-continue
03A4: 7B       [22]     	ld	a,e		;see if 7 or 8 data bits required
03A5: FE08     [29]     	cp	8		;if e=8, 8 bits are needed and one further loop
03A7: 280E     [36|41]  	jr	z,inchr3
03A9: 180E     [48]     	jr	inchr4		;finish up if seven
                        ;
03AB: 3A0050   [13]     inchr2: ld	a,(inadr)	;get the entered bit
03AE: E680     [20]     	and	10000000b	;mask off invalid bits
03B0: B1       [24]     	or	c		;mask on our accumulated value
03B1: 4F       [28]     	ld	c,a		;and save it here
03B2: CB39     [36]     	srl	c		;and shift it into the next bit position
03B4: CD2304   [53]     	call	del300		;delay one 300 baud bit time
03B7: 10E6     [ 8|13]  inchr3: djnz	inchr1		;loop for all data bits
03B9: CD3A04   [17]     inchr4: call	del302		;wait till end of data bit
03BC: 3A6180   [30]     	ld	a,(parmsg)	;check if parity delay needed
03BF: FE4E     [37]     	cp	'N'
03C1: C42304   [47|54]  	call	nz,del300
03C4: 79       [51]     	ld	a,c		;get the char back
03C5: C9       [61]     	ret
                        ;
                        ;output char
                        ;
03C6: F5       [11]     outchr: push	af		;save the char
03C7: 3EFF     [18]     	ld	a,255		;make a start bit
03C9: 320058   [31]     	ld	(outadr),a	;send it
03CC: CD2304   [48]     	call	del300		;and do a delay for 1 bit time
03CF: 3A3180   [61]     	ld	a,(dbits)	;get # of data bits
03D2: D630     [68]     	sub	'0'
03D4: 47       [72]     	ld	b,a		;and put the calculated data bit value in b
03D5: F1       [82]     	pop	af
03D6: F5       [93]     	push	af
03D7: 4F       [97]     	ld	c,a
03D8: CB39     [ 8]     snd1:	srl	c		;rotate bit 0 of c into carry flag
03DA: 3E00     [15]     	ld	a,00000000b	;in case of carry
03DC: 3802     [22|27]  	jr	c,snd2		;send if bit was 1
03DE: 3E80     [29]     	ld	a,10000000b	;make it one
03E0: 320058   [13]     snd2:	ld	(outadr),a	;send the char
03E3: CD2304   [30]     	call	del300		;delay for one bit time
03E6: 10F0     [38|43]  	djnz	snd1
03E8: F1       [48]     	pop	af		;restore char that was sent
03E9: 4F       [52]     	ld	c,a		;save it in c
03EA: 3A6180   [65]     	ld	a,(parmsg)	;check for parity
03ED: FE4E     [72]     	cp	'N'
03EF: 281C     [79|84]  	jr	z,nopar0	;z if no parity
03F1: 79       [83]     	ld	a,c		;get back restored character
03F2: B7       [87]     	or	a		;set parity flags
03F3: 3A6180   [100]    	ld	a,(parmsg)	;and get parity type for later testing
03F6: E20304   [110|110]	jp	po,oddpar	;jump if parity of the byte is odd
03F9: FE45     [117]    	cp	'E'		;was it supposed to be even
03FB: 3E80     [ 7]     tstpar: ld	a,10000000b
03FD: 2808     [14|19]  	jr	z,sndpar
03FF: 3E00     [21]     	ld	a,00000000b
0401: 1804     [33]     	jr	sndpar
                        ;
0403: FE4F     [ 7]     oddpar: cp	'O'		;set z flag if it was supposed to be odd
0405: 18F4     [19]     	jr	tstpar
                        
0407: 320058   [13]     sndpar: ld	(outadr),a
040A: CD2304   [30]     	call	del300
040D: 3A4980   [13]     nopar0: ld	a,(sbits)	;get # of stop bits
0410: D630     [20]     	sub	'0'		;make it hex 1 or 2
0412: 47       [24]     	ld	b,a
0413: AF       [ 4]     sbdel1: xor	a		;make a stop bit
0414: 320058   [17]     	ld	(outadr),a
0417: CD2304   [34]     	call	del300		;delay for middle of stop bit
041A: 10F7     [42|47]  	djnz	sbdel1
041C: C9       [52]     	ret
                        ;
                        ;check for a character coming in
                        ;
                        ;RX provides an active low input to the address buffer
                        ;
                        ;i.e. returned value is nz if a char is ready, z if not
                        ;
041D: 3A0050   [13]     chkstr: ld	a,(inadr)	;check input address
0420: CB7F     [21]     	bit	7,a
0422: C9       [31]     	ret
                        ;
                        ;These delay routines provide a correct mark to space ratio for checking
                        ;and sending the serial bit stream and are VERY VERY VERY critical.
                        ;if you÷ send a series of 'U' (a character with the same mark to space ratio)
                        ;characters and look at the output of the interface on a CRO, you will
                        ;see what i mean.
                        ;
                        ;
0423: F5       [11]     del300: push	af
0424: C5       [22]     	push	bc
0425: CD2E04   [39]     	call	del3a
0428: CD2E04   [56]     	call	del3a
042B: C1       [66]     	pop	bc
042C: F1       [76]     	pop	af
042D: C9       [86]     	ret
                        ;
042E: C5       [11]     del3a:	push	bc
042F: 3E23     [18]     	ld	a,215/6		;300 baud delay
0431: 060B     [ 7]     loop0:	ld	b,11
0433: 10FE     [ 8|13]  loop1:	djnz	loop1
0435: 3D       [12]     	dec	a
0436: 20F9     [19|24]  	jr	nz,loop0
0438: C1       [29]     	pop	bc
0439: C9       [39]     	ret
                        ;
043A: CD2E04   [17]     del302: call	del3a		;one 1/2 300 baud delay
043D: C5       [28]     	push	bc		;save this
043E: 3E22     [35]     	ld	a,205/6		;nex timing constant
0440: 18EF     [47]     	jr	loop0
                        ;
0442: F5       [11]     kdelay: push	af
0443: C5       [22]     	push	bc
0444: 01FF4F   [32]     	ld	bc,04fffh	;delay value
0447: CD6000   [49]     	call	vzdelay		;delay it
044A: C1       [59]     	pop	bc		;get registers back
044B: F1       [69]     	pop	af
044C: C9       [79]     	ret
                        ;
044D: 7E       [ 7]     msgout: ld	a,(hl)
044E: B7       [11]     	or	a
044F: C8       [16|22]  	ret	z
0450: CD6E04   [33]     	call	chrout
0453: 23       [39]     	inc	hl
0454: 18F7     [51]     	jr	msgout
                        ;
                        ;Character output routine
                        ;
0456: 210070   [10]     clrscr: ld	hl,toplin
0459: 22E580   [26]     	ld	(cursor),hl
045C: 110170   [36]     	ld	de,toplin+1
045F: 01FF01   [46]     	ld	bc,nolin+31
0462: 3660     [56]     	ld	(hl),96
0464: EDB0     [72|21]  	ldir
0466: AF       [76]     	xor	a
0467: 32E480   [89]     	ld	(curpos),a
046A: 320068   [102]    	ld	(26624),a
046D: C9       [112]    	ret
                        ;
046E: F5       [11]     chrout: push	af
046F: E5       [22]     	push	hl
0470: C5       [33]     	push	bc
0471: D5       [44]     	push	de
0472: CD7A04   [61]     	call	pntit
0475: D1       [71]     	pop	de
0476: C1       [81]     	pop	bc
0477: E1       [91]     	pop	hl
0478: F1       [101]    	pop	af
0479: C9       [111]    	ret
                        ;
047A: ED5BE580 [20]     pntit:	ld	de,(cursor)
047E: FE0C     [27]     	cp	ff
0480: 28D4     [34|39]  	jr	z,clrscr
0482: FE0D     [41]     	cp	cr
0484: 287E     [48|53]  	jr	z,crt		;do a cr
0486: FE08     [55]     	cp	bs
0488: 2835     [62|67]  	jr	z,bsp
048A: FE09     [69]     	cp	ht
048C: 2816     [76|81]  	jr	z,fsp
048E: FE0A     [83]     	cp	lf
0490: 284A     [90|95]  	jr	z,lfd
0492: FE07     [97]     	cp	bell
0494: CA5034   [107|107]	jp	z,beep
0497: CB7F     [115]    	bit	7,a
0499: 2008     [122|127]	jr	nz,grap
049B: FE20     [129]    	cp	32		;if not recognised control char, return
049D: F8       [134|140]	ret	m
049E: CD5D05   [151]    	call	fold		;fold lower to upper
04A1: CBF7     [159]    	set	6,a		;change non-alphabetical char
                        				;to black with white background
                        ;
04A3: 12       [ 7]     grap:	ld	(de),a
04A4: 13       [ 6]     fsp:	inc	de
04A5: ED53E580 [26]     	ld	(cursor),de
04A9: 3AE480   [39]     	ld	a,(curpos)
04AC: 3C       [43]     	inc	a
04AD: 32E480   [56]     	ld	(curpos),a
04B0: FE20     [63]     	cp	32
04B2: F8       [68|74]  	ret	m
04B3: CDF304   [85]     	call	docrlf
04B6: 3ADF80   [98]     	ld	a,(pntflg)	;printer on ?
04B9: B7       [102]    	or	a
04BA: C8       [107|113]	ret	z		;return if not
04BB: CD4905   [124]    	call	pcrlf
04BE: C9       [134]    	ret
                        ;
04BF: 3AE480   [13]     bsp:	ld	a,(curpos)
04C2: B7       [17]     	or	a
04C3: 280A     [24|29]  	jr	z,bsp1
04C5: 3D       [28]     	dec	a
04C6: 32E480   [13]     bsp2:	ld	(curpos),a
04C9: 1B       [19]     	dec	de
04CA: ED53E580 [39]     	ld	(cursor),de
04CE: C9       [49]     	ret
                        ;
04CF: E5       [11]     bsp1:	push	hl
04D0: 210070   [21]     	ld	hl,toplin
04D3: B7       [25]     	or	a
04D4: ED52     [40]     	sbc	hl,de
04D6: E1       [50]     	pop	hl
04D7: C8       [55|61]  	ret	z
04D8: 3E1F     [62]     	ld	a,31
04DA: 18EA     [74]     	jr	bsp2
                        ;
04DC: 3AE480   [13]     lfd:	ld	a,(curpos)
04DF: 4F       [17]     	ld	c,a
04E0: 0600     [24]     	ld	b,0
04E2: C5       [35]     	push	bc
04E3: CDF304   [52]     	call	docrlf
04E6: C1       [62]     	pop	bc
04E7: EB       [66]     	ex	de,hl
04E8: 09       [77]     	add	hl,bc
04E9: EB       [81]     	ex	de,hl
04EA: ED53E580 [101]    	ld	(cursor),de
04EE: 79       [105]    	ld	a,c
04EF: 32E480   [118]    	ld	(curpos),a
04F2: C9       [128]    	ret
                        ;
04F3: 3AE180   [13]     docrlf: ld	a,(p1flg)	;get current setting
04F6: F5       [24]     	push	af		;save it
04F7: 3E01     [31]     	ld	a,1		;make it so it does add on lf
04F9: 32E180   [44]     	ld	(p1flg),a
04FC: CD0405   [61]     	call	crt		;do it
04FF: F1       [71]     	pop	af		;get back original flag
0500: 32E180   [84]     	ld	(p1flg),a	;and save it again
0503: C9       [94]     	ret
                        ;
0504: E5       [11]     crt:	push	hl
0505: EB       [15]     	ex	de,hl
0506: 3AE480   [28]     	ld	a,(curpos)
0509: 5F       [32]     	ld	e,a
050A: 1600     [39]     	ld	d,0
050C: B7       [43]     	or	a
050D: ED52     [58]     	sbc	hl,de
050F: 3AE180   [71]     	ld	a,(p1flg)	;do we want to add on an lf to a cr
0512: B7       [75]     	or	a		;if zero we don't
0513: 2804     [82|87]  	jr	z,nolf
0515: 112000   [92]     	ld	de,32		;add on an lf if cr
0518: 19       [103]    	add	hl,de
0519: EB       [ 4]     nolf:	ex	de,hl
051A: 210072   [14]     	ld	hl,29184
051D: B7       [18]     	or	a
051E: ED52     [33]     	sbc	hl,de		;check for end of screen
0520: 280A     [40|45]  	jr	z,scroll	;scroll if so
0522: ED53E580 [20]     write4: ld	(cursor),de
0526: AF       [24]     	xor	a
0527: 32E480   [37]     	ld	(curpos),a
052A: E1       [47]     	pop	hl
052B: C9       [57]     	ret
                        ;
052C: 212070   [10]     scroll: ld	hl,toplin+32
052F: 110070   [20]     	ld	de,toplin
0532: 01E001   [30]     	ld	bc,nolin
0535: EDB0     [46|21]  	ldir
0537: 21E071   [56]     	ld	hl,29152
053A: 11E171   [66]     	ld	de,29153
053D: 011F00   [76]     	ld	bc,31
0540: 3660     [86]     	ld	(hl),96
0542: EDB0     [102|21] 	ldir
0544: 11E071   [112]    	ld	de,29152
0547: 18D9     [124]    	jr	write4
                        ;
0549: CDC405   [17]     pcrlf:	call	listst		;check printer status
054C: CB47     [25]     	bit	0,a
054E: C0       [30|36]  	ret	nz		;return if printer not ready
054F: CDE23A   [47]     	call	pcrlf1		;send crlf to printer if printer is ready
0552: C9       [57]     	ret
                        ;
                        ;
0553: CDC405   [17]     list1:	call	listst
0556: CB47     [25]     	bit	0,a
0558: C0       [30|36]  	ret	nz		;return if printer not ready
0559: 79       [34]     	ld	a,c
055A: C38D05   [44]     	jp	list		;list it and return
                        ;
055D: FE61     [ 7]     fold:	cp	'a'
055F: D8       [12|18]  	ret	c
0560: FE7B     [19]     	cp	'z'+1
0562: D0       [24|30]  	ret	nc
0563: E65F     [31]     	and	05fh		;make upper if lower
0565: C9       [41]     	ret
                        ;
                        ;Keyboard driver for VZ-200/300
                        ;
                        ;This keyboard drive is (c) Dick Smith Electronics and (c) 1982,1983,1984
                        ;Video Technology HK Ltd.
                        ;
68FE:                   row1	equ	068feh
68DF:                   row2	equ	068dfh
                        ;
0566: 21FE68   [10]     getkey: ld	hl,row1		;point to first row
0569: 0E08     [17]     	ld	c,8		;row counter
056B: 0606     [ 7]     scan1:	ld	b,6		;column counter
056D: 7E       [14]     	ld	a,(hl)		;get first key
056E: F604     [21]     	or	4		;mask out bit 2
0570: 1F       [ 4]     rot:	rra			;rotate bits
0571: 3058     [11|16]  	jr	nc,found	;exit if key pressed
0573: 10FB     [19|24]  	djnz	rot		;else try next bit
0575: CB05     [27]     	rlc	l		;get next address
0577: 0D       [31]     	dec	c		;dec row counter
0578: 20F1     [38|43]  	jr	nz,scan1	;try next row
057A: 0604     [45]     	ld	b,4		;get col counter
057C: 21DF68   [55]     	ld	hl,row2		;get next address
057F: 7E       [62]     	ld	a,(hl)		;read key
0580: CB57     [70]     	bit	2,a		;test bit 2 for keypress
0582: 283D     [77|82]  	jr	z,minus		;exit if key pressed
0584: CB05     [85]     	rlc	l		;get next address
0586: 7E       [92]     	ld	a,(hl)		;read key
0587: CB57     [100]    	bit	2,a		;test for keypress
0589: 283A     [107|112]	jr	z,carret	;exit if cr key pressed
058B: CB05     [115]    	rlc	l		;get next addr
058D: CB57     [123]    	bit	2,a
058F: 2838     [130|135]	jr	z,colon		;test if : pressed
0591: CB05     [138]    	rlc	l		;get next addr
0593: CB05     [146]    	rlc	l		;last addr had no char
0595: 7E       [153]    	ld	a,(hl)		;get the key
0596: CB57     [161]    	bit	2,a		;test for cntrl
0598: 2811     [168|173]	jr	z,ctrl
059A: CB05     [176]    	rlc	l		;get next address
059C: 7E       [183]    	ld	a,(hl)		;read key
059D: CB57     [191]    	bit	2,a
059F: 2811     [198|203]	jr	z,shift		;exit if shift key pressed
05A1: 3EFF     [205]    	ld	a,0ffh		;get no char code
05A3: 32E280   [218]    	ld	(char),a
05A6: AF       [222]    	xor	a
05A7: 32E380   [235]    	ld	(flag),a	;clear shift flag
05AA: C9       [245]    	ret
                        ;
05AB: 3AE380   [13]     ctrl:	ld	a,(flag)
05AE: CBD7     [21]     	set	2,a
05B0: 1805     [33]     	jr	keyexit
                        ;
05B2: 3AE380   [13]     shift:	ld	a,(flag)	;get flag
05B5: CBCF     [21]     	set	1,a		;set bit 1 flag
05B7: 32E380   [13]     keyexit:ld	(flag),a
05BA: 3EFF     [20]     	ld	a,0ffh		;make no char code
05BC: 32E280   [33]     	ld	(char),a
05BF: AF       [ 4]     same:	xor	a		;if char the same, return no char so as to
                        				;remove the key repeat
05C0: C9       [14]     	ret
                        ;
05C1: 0E03     [ 7]     minus:	ld	c,3		;set row count
05C3: 1806     [19]     	jr	found		;exit
                        ;
05C5: 0E02     [ 7]     carret: ld	c,2		;set row count
05C7: 1802     [19]     	jr	found
                        ;
05C9: 0E01     [ 7]     colon:	ld	c,1		;set row count
                        ;
05CB: 210506   [10]     found:	ld	hl,txtble	;point to lookup table
05CE: 1E00     [17]     	ld	e,0		;clear shift/control offset
05D0: 3AE380   [30]     	ld	a,(flag)
05D3: CB57     [38]     	bit	2,a		;test for ctrl key hit last time
05D5: 2804     [45|50]  	jr	z,noctrl
05D7: 1E60     [52]     	ld	e,48*2		;make up control table offset
05D9: 1806     [64]     	jr	noshift
                        ;
05DB: CB4F     [ 8]     noctrl: bit	1,a		;test for the shift key
05DD: 2802     [15|20]  	jr	z,noshift
05DF: 1E30     [22]     	ld	e,48		;set shifted offset
05E1: 3E08     [ 7]     noshift:ld	a,8		;setup row count
05E3: 91       [11]     	sub	c		;calc offset
05E4: 4F       [15]     	ld	c,a		;store in C
05E5: 3E06     [22]     	ld	a,6		;setup column count
05E7: 90       [26]     	sub	b		;calc offset
05E8: 47       [30]     	ld	b,a		;store in b
05E9: CDFA05   [47]     	call	cond		;get table offset in A
05EC: 83       [51]     	add	a,e		;add shift offset
05ED: 0600     [58]     	ld	b,0		;clear b
05EF: 4F       [62]     	ld	c,a		;offset in C
05F0: 09       [73]     	add	hl,bc		;get character position
05F1: 7E       [80]     	ld	a,(hl)		;get char in A
05F2: 21E280   [90]     	ld	hl,char		;get last char
05F5: BE       [97]     	cp	(hl)		;same as last ?
05F6: 28C7     [104|109]	jr	z,same
05F8: 77       [111]    	ld	(hl),a		;if not same, save the char
05F9: C9       [121]    	ret
                        ;
05FA: AF       [ 4]     cond:	xor	a		;clear a reg.
05FB: B9       [ 8]     	cp	c		;is c=0
05FC: 2805     [15|20]  	jr	z,hre		;bypass if yes
05FE: C606     [ 7]     mult:	add	a,6		;inc by six
0600: 0D       [11]     	dec	c		;dec counter
0601: 20FB     [18|23]  	jr	nz,mult
0603: 80       [ 4]     hre:	add	a,b		;add bit count
0604: C9       [14]     	ret
                        ;
0605: 54572045          txtble: defb	'TW EQRGS DAFBX CZV52 314N. , M'
0609: 51524753          
060D: 20444146          
0611: 42582043          
0615: 5A563532          
0619: 20333134          
061D: 4E2E202C          
0621: 204D              
0623: 36392D38          	defb	'69-807YO'
0627: 3037594F          
062B: 0D                	defb	0dh
062C: 49505548          	defb	'IPUHL:K;J'
0630: 4C3A4B3B          
0634: 4A                
                        ;
                        ;shifted characters
                        ;
0635: 00                	defb	0		;shift T
0636: 00                	defb	0		;shift w
0637: 00                	defb	0
0638: 00                	defb	0		;shift e
0639: 00                	defb	0		;shift q
063A: 00                	defb	0		;shift r
063B: 00                	defb	0		;shift g
063C: 00                	defb	0		;shift s
063D: 00                	defb	0		;cntrl
063E: 00                	defb	0		;shift d
063F: 00                	defb	0		;shift a
0640: 00                	defb	0		;shift f
0641: 00                	defb	0		;shift b
0642: 65                	defb	101		;shift x
0643: 00                	defb	0		;null
0644: 00                	defb	0		;shift c
0645: 0000              	defw	0		;null
0647: 25222023          	defb	'%" #!$'        ;shifted 52 314
064B: 2124              
064D: 00                	defb	0		;shift n
064E: 3E                	defb	'>'		;shift .
064F: 00                	defb	0
0650: 3C                	defb	'<'		;shift ,
0651: 00                	defb	0		;null
0652: 5C                	defb	92		;shift m
0653: 26293D28          	defb	'&)=('		;shifted 69-8
0657: 40                	defb	'@'		;shift 0
0658: 00                	defb	0		;shift 7
0659: 00                	defb	0		;shift y
065A: 00                	defb	0		;shift o
065B: 00                	defb	0		;shift cr
065C: 00                	defb	0		;shift i
065D: 00                	defb	0		;shift p
065E: 00                	defb	0		;shift u
065F: 00                	defb	0		;shift h
0660: 3F                	defb	'?'		;shift l
0661: 2A                	defb	'*'		;shift :
0662: 2F                	defb	'/'		;shift k
0663: 2B                	defb	'+'		;shift ;
0664: 00                	defb	0		;shift j
                        ;
                        ;control characters
                        ;
0665: 14                	defb	'T'-040h	;control t
0666: 17                	defb	'W'-040h	;control w
0667: 00                	defb	0
0668: 05                	defb	'E'-040h	;control e
0669: 11                	defb	'Q'-040h	;control q
066A: 12                	defb	'R'-040h	;control r
066B: 07                	defb	'G'-040h	;control g
066C: 13                	defb	'S'-040h	;control s
066D: 00                	defb	0
066E: 00                	defb	0		;control d
066F: 01                	defb	'A'-040h	;control a
0670: 06                	defb	'F'-040h	;control f
0671: 02                	defb	'B'-040h	;control b
0672: 18                	defb	'X'-040h	;control x
0673: 00                	defb	0
0674: 03                	defb	'C'-040h	;control c
0675: 1A                	defb	'Z'-040h	;control z
0676: 16                	defb	'V'-040h	;control v
0677: 00                	defb	0
0678: 00                	defb	0
0679: 00                	defb	0
067A: 00                	defb	0
067B: 00                	defb	0
067C: 00                	defb	0
067D: 0E                	defb	'N'-040h	;control n
067E: 00                	defb	0
067F: 00                	defb	0
0680: 00                	defb	0
0681: 00                	defb	0
0682: 0D                	defb	cr		;control m
0683: 00                	defb	0
0684: 00                	defb	0
0685: 00                	defb	0
0686: 00                	defb	0
0687: 00                	defb	0
0688: 00                	defb	0
0689: 19                	defb	'Y'-040h	;control y
068A: 0F                	defb	'O'-040h	;control o
068B: 00                	defb	0
068C: 09                	defb	ht		;control i
068D: 10                	defb	'P'-040h	;control p
068E: 15                	defb	'U'-040h	;control u
068F: 08                	defb	bs		;control h
0690: 0C                	defb	ff		;control l
0691: 00                	defb	0
0692: 0B                	defb	'K'-040h	;control k
0693: 00                	defb	0
0694: 0A                	defb	lf		;control j
                        


; +++ segments +++

#CODE :        start=256   len=1429 

; +++ global symbols +++

addlf   = $0301 =    769          VZ RS232edit.ASM.txt:172
beep    = $3450 =  13392          VZ RS232edit.ASM.txt:4
begadr  = $0100 =    256          VZ RS232edit.ASM.txt:48 (unused)
bell    = $0007 =      7          VZ RS232edit.ASM.txt:20
bs      = $0008 =      8          VZ RS232edit.ASM.txt:23
bsp     = $04BF =   1215          VZ RS232edit.ASM.txt:452
bsp1    = $04CF =   1231          VZ RS232edit.ASM.txt:461
bsp2    = $04C6 =   1222          VZ RS232edit.ASM.txt:456
bufend  = $9000 =  36864          VZ RS232edit.ASM.txt:41 (unused)
carret  = $05C5 =   1477          VZ RS232edit.ASM.txt:610
char    = $80E2 =  32994          VZ RS232edit.ASM.txt:37
chkstr  = $041D =   1053          VZ RS232edit.ASM.txt:344
chrot   = $033A =    826          VZ RS232edit.ASM.txt:8 (unused)
chrout  = $046E =   1134          VZ RS232edit.ASM.txt:405
clrscr  = $0456 =   1110          VZ RS232edit.ASM.txt:394
cmdtab  = $02CE =    718          VZ RS232edit.ASM.txt:140
colon   = $05C9 =   1481          VZ RS232edit.ASM.txt:613
cond    = $05FA =   1530          VZ RS232edit.ASM.txt:644
count1  = $0216 =    534          VZ RS232edit.ASM.txt:81
count2  = $027C =    636          VZ RS232edit.ASM.txt:87
count3  = $0066 =    102          VZ RS232edit.ASM.txt:88
cr      = $000D =     13          VZ RS232edit.ASM.txt:18
crt     = $0504 =   1284          VZ RS232edit.ASM.txt:493
crtdge  = $4000 =  16384          VZ RS232edit.ASM.txt:1 (unused)
ctrl    = $05AB =   1451          VZ RS232edit.ASM.txt:594
curpos  = $80E4 =  32996          VZ RS232edit.ASM.txt:39
cursor  = $80E5 =  32997          VZ RS232edit.ASM.txt:40
dbits   = $8031 =  32817          VZ RS232edit.ASM.txt:30
del300  = $0423 =   1059          VZ RS232edit.ASM.txt:355
del302  = $043A =   1082          VZ RS232edit.ASM.txt:372
del3a   = $042E =   1070          VZ RS232edit.ASM.txt:363
docrlf  = $04F3 =   1267          VZ RS232edit.ASM.txt:484
dumsg   = $8000 =  32768          VZ RS232edit.ASM.txt:28
dupflg  = $80E0 =  32992          VZ RS232edit.ASM.txt:35
esc     = $001B =     27          VZ RS232edit.ASM.txt:19 (unused)
exitkey = $0065 =    101          VZ RS232edit.ASM.txt:9
ff      = $000C =     12          VZ RS232edit.ASM.txt:21
flag    = $80E3 =  32995          VZ RS232edit.ASM.txt:38
fold    = $055D =   1373          VZ RS232edit.ASM.txt:541
found   = $05CB =   1483          VZ RS232edit.ASM.txt:615
fsp     = $04A4 =   1188          VZ RS232edit.ASM.txt:438
fullmsg = $010D =    269          VZ RS232edit.ASM.txt:61
getkey  = $0566 =   1382          VZ RS232edit.ASM.txt:556
grap    = $04A3 =   1187          VZ RS232edit.ASM.txt:437
halfmsg = $0111 =    273          VZ RS232edit.ASM.txt:62
home    = $001C =     28          VZ RS232edit.ASM.txt:17 (unused)
hre     = $0603 =   1539          VZ RS232edit.ASM.txt:650
ht      = $0009 =      9          VZ RS232edit.ASM.txt:24
inadr   = $5000 =  20480          VZ RS232edit.ASM.txt:11
inchr   = $038F =    911          VZ RS232edit.ASM.txt:261
inchr1  = $039F =    927          VZ RS232edit.ASM.txt:268
inchr2  = $03AB =    939          VZ RS232edit.ASM.txt:276
inchr3  = $03B7 =    951          VZ RS232edit.ASM.txt:282
inchr4  = $03B9 =    953          VZ RS232edit.ASM.txt:283
ivalend = $0284 =    644          VZ RS232edit.ASM.txt:99
ivals   = $019D =    413          VZ RS232edit.ASM.txt:71
ivals2  = $027C =    636          VZ RS232edit.ASM.txt:89 (unused)
kdelay  = $0442 =   1090          VZ RS232edit.ASM.txt:377 (unused)
keyexit = $05B7 =   1463          VZ RS232edit.ASM.txt:600
kget    = $02B3 =    691          VZ RS232edit.ASM.txt:120
lf      = $000A =     10          VZ RS232edit.ASM.txt:22
lfd     = $04DC =   1244          VZ RS232edit.ASM.txt:470
list    = $058D =   1421          VZ RS232edit.ASM.txt:6
list1   = $0553 =   1363          VZ RS232edit.ASM.txt:535
listst  = $05C4 =   1476          VZ RS232edit.ASM.txt:7
loop0   = $0431 =   1073          VZ RS232edit.ASM.txt:365
loop1   = $0433 =   1075          VZ RS232edit.ASM.txt:366
minus   = $05C1 =   1473          VZ RS232edit.ASM.txt:607
moveit  = $0335 =    821          VZ RS232edit.ASM.txt:202 (unused)
moveit1 = $0332 =    818          VZ RS232edit.ASM.txt:201
msgout  = $044D =   1101          VZ RS232edit.ASM.txt:385
mult    = $05FE =   1534          VZ RS232edit.ASM.txt:647
noctrl  = $05DB =   1499          VZ RS232edit.ASM.txt:623
nolf    = $0519 =   1305          VZ RS232edit.ASM.txt:505
nolin   = $01E0 =    480          VZ RS232edit.ASM.txt:13
nopar0  = $040D =   1037          VZ RS232edit.ASM.txt:329
noshift = $05E1 =   1505          VZ RS232edit.ASM.txt:626
oddpar  = $0403 =   1027          VZ RS232edit.ASM.txt:324
offmsg  = $010A =    266          VZ RS232edit.ASM.txt:60
onmsg   = $0107 =    263          VZ RS232edit.ASM.txt:59
outadr  = $5800 =  22528          VZ RS232edit.ASM.txt:10
outchr  = $03C6 =    966          VZ RS232edit.ASM.txt:292
p1flg   = $80E1 =  32993          VZ RS232edit.ASM.txt:36
p1msg   = $8079 =  32889          VZ RS232edit.ASM.txt:33
parmsg  = $8061 =  32865          VZ RS232edit.ASM.txt:32
pcrlf   = $0549 =   1353          VZ RS232edit.ASM.txt:528
pcrlf1  = $3AE2 =  15074          VZ RS232edit.ASM.txt:5
pntflg  = $80DF =  32991          VZ RS232edit.ASM.txt:34
pntit   = $047A =   1146          VZ RS232edit.ASM.txt:416
pntmsg  = $8019 =  32793          VZ RS232edit.ASM.txt:29
prnton  = $02F7 =    759          VZ RS232edit.ASM.txt:165
rot     = $0570 =   1392          VZ RS232edit.ASM.txt:561
row1    = $68FE =  26878          VZ RS232edit.ASM.txt:553
row2    = $68DF =  26847          VZ RS232edit.ASM.txt:554
same    = $05BF =   1471          VZ RS232edit.ASM.txt:603
sbdel1  = $0413 =   1043          VZ RS232edit.ASM.txt:332
sbits   = $8049 =  32841          VZ RS232edit.ASM.txt:31
scan1   = $056B =   1387          VZ RS232edit.ASM.txt:558
scroll  = $052C =   1324          VZ RS232edit.ASM.txt:516
sdb1    = $0343 =    835          VZ RS232edit.ASM.txt:212
sdbits  = $0338 =    824          VZ RS232edit.ASM.txt:207
setfh   = $02DC =    732          VZ RS232edit.ASM.txt:150
setfh1  = $02EB =    747          VZ RS232edit.ASM.txt:157
shift   = $05B2 =   1458          VZ RS232edit.ASM.txt:598
signon  = $0115 =    277          VZ RS232edit.ASM.txt:64
snd1    = $03D8 =    984          VZ RS232edit.ASM.txt:302
snd2    = $03E0 =    992          VZ RS232edit.ASM.txt:306
sndpar  = $0407 =   1031          VZ RS232edit.ASM.txt:327
spar    = $030B =    779          VZ RS232edit.ASM.txt:179
ssb2    = $0352 =    850          VZ RS232edit.ASM.txt:222
ssbits  = $0347 =    839          VZ RS232edit.ASM.txt:217
stack   = $9000 =  36864          VZ RS232edit.ASM.txt:2
start   = $0284 =    644          VZ RS232edit.ASM.txt:101
start1  = $0293 =    659          VZ RS232edit.ASM.txt:107
stpar1  = $031C =    796          VZ RS232edit.ASM.txt:187
term    = $0356 =    854          VZ RS232edit.ASM.txt:225
term1   = $036C =    876          VZ RS232edit.ASM.txt:234
togg1   = $0328 =    808          VZ RS232edit.ASM.txt:196
toggle  = $0321 =    801          VZ RS232edit.ASM.txt:191
toplin  = $7000 =  28672          VZ RS232edit.ASM.txt:12
tryser  = $0359 =    857          VZ RS232edit.ASM.txt:226
tstpar  = $03FB =   1019          VZ RS232edit.ASM.txt:319
txtble  = $0605 =   1541          VZ RS232edit.ASM.txt:653
vzdelay = $0060 =     96          VZ RS232edit.ASM.txt:3
write4  = $0522 =   1314          VZ RS232edit.ASM.txt:510


total time: 0.0134 sec.
no errors
