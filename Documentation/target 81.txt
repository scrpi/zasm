


h3	#target 81 / #target p

p	This creates a tape file for use with an ZX81 emulator. There is only one #code segment allowed, which is not padded but truncated. The tape file will allways be loaded to ram start + $09 at address $4009.

pre	#target	81
	#code	<start>,<len>
		...
	#end
	
p	"p" can be used instead of "81". This will create a target file with extension "p" or "81" respectively, which are fully identical.

p	The tape data is always loaded to $4009, so this is the only choice for the <start> address in the #code directive. The <size> may be any value up to a maximum of $C000 minus $09, but note that most ZX81 had maximum 16 kB ram if extended with an external memory expansion, only 1 kB if none.

p	The ram starts with system variables from $4009 to $403C, which must be set to proper values. The variable E_LINE at the address $4014, which contains the end of ram address, is set by the assembler. You need not to calculate it, just skip it with "defs 2" or "defw 0".

P	This file also contains the screen file, which basically means, that the video memory must contain 25 HALT opcodes if the file was saved in SLOW mode.

h6	Here are few important variables:

pre	$4014	defines the end address (used to calculate the file length)
	$4029	points to the next executed (autostarted) BASIC line
	$403B	bit 6 indicates if program runs in SLOW or FAST mode 
	$403C++	may be misused for whatever purpose


	